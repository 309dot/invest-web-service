# 2025-11-03 작업 내역

## 통화 로직 개선
- `lib/currency.ts` 신규 추가, USD/KRW 환율 캐시 및 변환 유틸 정리
- `calculatePortfolioTotals`/`calculateTransactionStats` 등 통화 합산 로직 일원화
- `/api/balance`, `/api/transactions` 응답에 환율 메타 및 합산 정보 포함
- `PortfolioOverview`, `TransactionsPage` 표시 로직을 통합 데이터에 맞게 정리

## AI 어드바이저 안정화
- `/api/ai-advisor`에서 `GPT_OSS_API_KEY` 사전 검사 및 표준 에러 코드 응답
- `AIAdvisorResult` 구조화(`recommendations` 객체화, `riskScore` 등 추가)
- `AIAdvisorCard`, 주간 리포트에서 새 데이터 구조와 에러 메시지 대응

## 포트폴리오 분석 화면 리팩터링
- `components/analysis/*` 하위에 `RiskSection`, `AllocationPieChart`, `TopContributorsChart`, `GPTSummaryCard`, `RecommendationList` 분리
- `portfolio/analysis/page.tsx`를 모듈화된 컴포넌트 기반 레이아웃으로 교체 및 AI 진단 연동

## QA 자동화
- `scripts/qa/dashboard-consistency-check.js` 추가, 포지션 총액 vs 거래 총액 검증 스크립트 작성
- `package.json`에 `npm run qa:consistency` 스크립트 등록

