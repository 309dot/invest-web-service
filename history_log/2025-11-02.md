# 2025-11-02 서비스 개선 작업 로그

## 주요 개선 사항
- **잔액 관리**: `exchangeRate`가 정의되지 않은 경우 Firestore `setDoc`이 실패하던 문제 해결. 서버/클라이언트 모두에서 환율과 환전 금액을 안전하게 정제하고 `NaN`/`undefined`를 제거하도록 수정.
- **포지션 데이터 정합성**: 포트폴리오 조회 시 거래 이력을 기반으로 보유 수량/평균단가/손익을 재계산하여 2배로 표시되던 버그를 방지. 필요한 경우 Firestore 문서를 자동 보정하도록 로직 추가.
- **자동 투자 스케줄**: 변경 시 기준 단가를 현재 가치로 자동 채우고 히스토리를 갱신하도록 UX 개선, 적용 시작일 이후 거래 재생성 시 실수 방지.
- **뉴스 대시보드**: 카드 UI를 간결하게 개편하고 원문 이동 링크를 카드 전체에 적용. 본문 요약이 비어있는 경우를 대비해 관련 종목·영향도 중심으로 재배치.
- **포트폴리오 ID 관리**: 로그인 사용자별 기본 포트폴리오 ID(`{uid}_default`)를 자동으로 사용하도록 홈/분석/뉴스/거래/종목 추가 화면 및 API 호출을 정비.
- **설정 화면**: 알림 이메일을 로그인한 계정 메일로 기본 세팅하고, 투자 한도/매도 임계값 설정은 종목 상세에서 처리하도록 안내.

## 테스트
- `npm run lint`

