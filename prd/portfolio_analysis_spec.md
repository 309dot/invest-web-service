# 포트폴리오 분석 & 리밸런싱 기능 기획서 (전문가 버전)

## 1. 문서 목적

본 문서는 **Cursor 기반 개발**을 위해 구조화된 Markdown(.md) 파일로
제공되며,\
초보 투자자도 스스로 궁금증을 느끼고 데이터를 탐색할 수 있도록
**전문가가 알려주는 방식**으로 구성되었습니다.\
이 시스템은 개인 포트폴리오 데이터를 정교하게 분석하고, 투자자가
합리적인 리밸런싱 결정을 내릴 수 있도록 돕는 것을 목표로 합니다.

------------------------------------------------------------------------

## 2. 전체 구조

포트폴리오 분석 기능은 아래 4개 모듈로 구성됩니다.

1.  **데이터 정규화 모듈**
2.  **핵심 지표 분석 모듈**
3.  **포트폴리오 진단(AI Insight)**
4.  **리밸런싱 시뮬레이터**

이 문서는 각 모듈을 초보 개발자도 이해할 수 있도록 실무 기준에 맞게
설명합니다.

------------------------------------------------------------------------

## 3. 데이터 정규화 모듈

### ✔ 목적

모든 분석의 기반이 되는 값을 **같은 단위(KRW)**로 통일합니다.

### ✔ 기능

-   해외 종목 → USD → KRW 환산\
-   총 자산 = Σ(원화 평가액)\
-   종목별 비중 계산\
-   수익률 계산(단기/누적/연환산)

### ✔ 초보가 궁금할 수 있는 지점

-   "왜 모든 데이터를 KRW로 통일해야 하지?" → *비중·수익률 계산 시
    단위가 다르면 왜곡 발생*
-   "환율 변화는 수익률에 어떻게 반영되나요?" → *해외 자산은 환율에
    직접적으로 노출됨*

------------------------------------------------------------------------

## 4. 핵심 지표 분석 모듈

### ✔ 포함 지표

-   변동성 (Volatility)
-   표준편차
-   Sharpe Ratio
-   최대 낙폭(MDD)
-   섹터/지역 비중
-   포트폴리오 집중도(HHI)

### ✔ 초보자가 학습하기 좋은 포인트

-   "Sharpe Ratio가 음수면 무엇을 의미할까?"
-   "MDD가 왜 중요한 리스크 지표일까?"
-   "섹터가 하나뿐이면 어떤 위험이 있을까?"

------------------------------------------------------------------------

## 5. 포트폴리오 진단 (AI Insight)

### ✔ 목적

초보에게도 이해 가능한 **포트폴리오 상태 요약** 제공

### ✔ 구성

-   강점 요약
-   약점 요약
-   종목별 평가
-   추천 액션 플랜(기간 기준)

### ✔ 초보가 탐구할 질문

-   "내 포트폴리오에서 가장 위험한 종목은 누구일까?"
-   "왜 특정 종목은 매도하라고 할까?"
-   "고변동 종목을 유지해야 하는 이유는?"

------------------------------------------------------------------------

## 6. 리밸런싱 시뮬레이터 (핵심 기능)

### ✔ 기존 문제점(실제 페이지 기준)

-   비중 계산 오류
-   단위 혼동(원화/달러)
-   비현실적 매매 제안

### ✔ 전문가 기준 설계

#### 1) 현재 상태 계산

    현재 총액 = Σ(원화 평가액)
    현재 비중 = (종목 평가액 / 총액) × 100

#### 2) 목표 비중 입력

-   합계 100% 자동 검증
-   추천 프리셋 제공(안정형/공격형 등)

#### 3) 목표 금액 계산

    목표 금액 = 총액 × 목표 비중
    차액 = 목표 금액 - 현재 평가액

#### 4) 매수/매도 리스트 산출

-   차액 \> 0 : 매수
-   차액 \< 0 : 매도
-   최소 매수 단위 반영(ETF 단위)
-   세금/수수료 옵션 제공

------------------------------------------------------------------------

## 7. 화면 구조(UX)

### ✔ 초보자 중심 UI 설계 원칙

1.  숫자가 아닌 "문장 기반 설명"을 먼저 보여준다.\
2.  클릭하면 더 깊이 들어가는 **힌트 레이어** 제공\
3.  각 지표 옆에 "왜 중요한가?" 버튼 제공\
4.  종목별로 미니 차트(1개월) 제공

------------------------------------------------------------------------

## 8. 데이터 테이블 구성

### ✔ 종목 요약 테이블

  항목              데이터
  ----------------- ---------------
  종목명            Ticker + 이름
  현재가            원화 환산
  평가금액          KRW
  수익률            \%
  포트폴리오 비중   \%
  변동성(옵션)      \%

------------------------------------------------------------------------

## 9. 리밸런싱 출력 예시 (전문가 스타일)

  종목     현재비중   목표비중   매수/매도   금액         비고
  -------- ---------- ---------- ----------- ------------ -------------
  069500   49%        30%        매도        -135,000원   과도 집중
  MGK      10%        18%        매수        +85,000원    성장주 확대
  FIG      6%         0%         전량 매도   -80,000원    고위험

------------------------------------------------------------------------

## 10. 향후 확장 기능

### ✔ 추가 가능 모듈

-   목표수익률 기반 리스크 예측
-   자동 월간 리스크 리포트
-   시장 정서 분석 기반 조정

------------------------------------------------------------------------

## 11. 결론

이 기획서는 초보 투자자가 스스로 학습하고 궁금증을 확장해나갈 수 있도록\
전문가의 시선으로 데이터 구조와 기능 설계를 제공합니다.\
Cursor에서 그대로 붙여넣고 개발 가능한 수준의 단단한 설계를 목표로
합니다.
